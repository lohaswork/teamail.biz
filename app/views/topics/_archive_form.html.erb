<% archive_disabled = (@topic.blank? || login_user_has_archived?(@topic)) ? 'disabled' : false %>
<%= form_tag archive_topics_path(:topic => @topic), :method => "post", :remote => true do %>
  <%= button_tag(type: "submit", id: "archive-submit", class: "btn btn-default", disabled: archive_disabled) do %>
    <i class="icon-archive"></i>
  <% end %>
  <%= hidden_field_tag :selected_topics_to_archive, '' %>
<% end %>
